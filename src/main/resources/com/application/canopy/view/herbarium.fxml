<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Text?>
<?import com.application.canopy.model.MasonryPane?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.application.canopy.controller.HerbariumController"
            fx:id="root">

    <center>
        <SplitPane dividerPositions="0.64">
            <items>

                <!-- AREA DETTAGLIO con MasonryPane -->
                <ScrollPane fx:id="detailScroll"
                            fitToWidth="true"
                            pannable="true"
                            hbarPolicy="NEVER"
                            vbarPolicy="AS_NEEDED"
                            styleClass="scrollpane-clean">
                        <StackPane fx:id="herbRoot"
                                   styleClass="herb-scroll-root">

                            <!-- BOARD CENTRALE -->
                            <MasonryPane fx:id="masonryBoard"
                                         hgap="24"
                                         vgap="24"
                                         maxWidth="960"
                                         StackPane.alignment="TOP_CENTER">

                                <!-- CARD 1: icona pianta -->
                                <StackPane fx:id="heroCard"
                                           styleClass="hero-image-card"
                                           prefWidth="320" maxWidth="320"
                                           prefHeight="360" maxHeight="360">

                                    <clip>
                                        <Rectangle fx:id="heroClip"
                                                   arcWidth="28"
                                                   arcHeight="28"/>
                                    </clip>

                                    <ImageView fx:id="plantIcon"
                                               preserveRatio="true"
                                               smooth="true"
                                               StackPane.alignment="CENTER"/>
                                </StackPane>

                                <!-- CARD 2: titolo + rarità + curiosità -->
                                <VBox spacing="12"
                                      styleClass="info-card hero-text">
                                    <Label fx:id="plantTitle"
                                           text="-"
                                           styleClass="plant-title"/>

                                    <HBox spacing="8">
                                        <Label fx:id="rarityBadge"
                                               text=""
                                               styleClass="rarity-badge"/>
                                    </HBox>

                                    <Text fx:id="plantCuriosity"
                                          styleClass="plant-curiosity"
                                          wrappingWidth="260"/>
                                </VBox>

                                <!-- CARD 3: DESCRIZIONE -->
                                <VBox spacing="8"
                                      styleClass="info-card">
                                    <Label text="DESCRIZIONE"
                                           styleClass="section-title-herb"/>
                                    <Text fx:id="plantDescription"
                                          styleClass="section-body"
                                          wrappingWidth="260"/>
                                </VBox>

                                <!-- CARD 4: CURA -->
                                <VBox spacing="8"
                                      styleClass="info-card">
                                    <Label text="CURA"
                                           styleClass="section-title-herb"/>
                                    <Text fx:id="plantCare"
                                          styleClass="section-body"
                                          wrappingWidth="260"/>
                                </VBox>

                                <!-- CARD 5: Immagine 1 -->
                                <StackPane fx:id="variant1Card"
                                           styleClass="gallery-card">
                                    <clip>
                                        <Rectangle fx:id="variant1Clip"
                                                   arcWidth="22"
                                                   arcHeight="22"/>
                                    </clip>

                                    <ImageView fx:id="variant1Image"
                                               preserveRatio="true"
                                               smooth="true"
                                               StackPane.alignment="CENTER"/>
                                </StackPane>

                                <!-- CARD 6: Immagine 2 -->
                                <StackPane fx:id="variant2Card"
                                           styleClass="gallery-card">
                                    <clip>
                                        <Rectangle fx:id="variant2Clip"
                                                   arcWidth="22"
                                                   arcHeight="22"/>
                                    </clip>

                                    <ImageView fx:id="variant2Image"
                                               preserveRatio="true"
                                               smooth="true"
                                               StackPane.alignment="CENTER"/>
                                </StackPane>

                                <!-- CARD 7: Immagine 3 -->
                                <StackPane fx:id="variant3Card"
                                           styleClass="gallery-card">
                                    <clip>
                                        <Rectangle fx:id="variant3Clip"
                                                   arcWidth="22"
                                                   arcHeight="22"/>
                                    </clip>

                                    <ImageView fx:id="variant3Image"
                                               preserveRatio="true"
                                               smooth="true"
                                               StackPane.alignment="CENTER"/>
                                </StackPane>

                            </MasonryPane>

                            <!-- MESSAGGIO “NESSUNA PIANTA SELEZIONATA” -->
                            <Label fx:id="emptyHint"
                                   text="Seleziona una pianta dalla lista a destra."
                                   styleClass="hint"
                                   StackPane.alignment="CENTER"/>
                        </StackPane>
                </ScrollPane>

                <!-- SIDEBAR DESTRA -->
                <VBox styleClass="sidebar-right" spacing="12">
                    <HBox spacing="6">
                        <TextField fx:id="searchField"
                                   promptText="Cerca pianta..."
                                   HBox.hgrow="ALWAYS"
                                   styleClass="search-bar"/>
                        <Button fx:id="clearSearchBtn"
                                text="✕"
                                mnemonicParsing="false"/>
                    </HBox>

                    <HBox spacing="8">
                        <ToggleButton fx:id="allChip"
                                      text="Tutte"
                                      styleClass="chip"/>
                        <ToggleButton fx:id="commonChip"
                                      text="Comuni"
                                      styleClass="chip"/>
                        <ToggleButton fx:id="rareChip"
                                      text="Rare"
                                      styleClass="chip"/>
                        <ToggleButton fx:id="specialChip"
                                      text="Speciali"
                                      styleClass="chip"/>
                    </HBox>

                    <Separator/>

                    <ListView fx:id="plantsList"
                              VBox.vgrow="ALWAYS"/>
                </VBox>

            </items>
        </SplitPane>
    </center>
</BorderPane>
