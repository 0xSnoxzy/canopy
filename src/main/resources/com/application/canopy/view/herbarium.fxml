<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:id="root"
            fx:controller="com.application.canopy.controller.HerbariumController">

    <!-- ⚠️ NIENTE NAV QUI ⚠️ -->

    <!-- CENTRO: SplitPane = [Dettaglio | Sidebar destra] -->
    <center>
        <SplitPane fx:id="mainSplit" dividerPositions="0.66">
            <items>

                <ScrollPane fx:id="detailScroll" fitToWidth="true" fitToHeight="true" pannable="true">
                    <content>
                        <VBox spacing="16" styleClass="content-root">
                            <padding>
                                <Insets top="16" right="16" bottom="16" left="16"/>
                            </padding>

                            <StackPane fx:id="stageContainer" styleClass="plant-stage">
                                <!-- background -->
                                <ImageView fx:id="stageBackground"
                                           preserveRatio="true" smooth="true"
                                           pickOnBounds="false"/>

                                <!-- tasto switch sfondo -->
                                <HBox spacing="8" alignment="CENTER_RIGHT" StackPane.alignment="TOP_RIGHT"
                                      styleClass="stage-controls">
                                    <Label text="Sfondo:"/>
                                    <ChoiceBox fx:id="backgroundChoice" prefWidth="200"/>
                                </HBox>

                                <!-- overlay della pianta -->
                                <ImageView fx:id="plantImage"
                                           preserveRatio="true" smooth="true"
                                           pickOnBounds="true" styleClass="plant-hero"/>
                            </StackPane>

                            <!-- TESTI PIANTE -->
                            <VBox spacing="12" styleClass="detail">
                                <Label fx:id="plantTitle" styleClass="plant-title"/>
                                <Text fx:id="plantCuriosity" wrappingWidth="800" styleClass="plant-curiosity"/>

                                <VBox spacing="6" styleClass="detail-section">
                                    <Label text="Descrizione" styleClass="section-title"/>
                                    <Text fx:id="plantDescription" wrappingWidth="800" styleClass="section-body"/>
                                </VBox>

                                <VBox spacing="6" styleClass="detail-section">
                                    <Label text="Cura" styleClass="section-title"/>
                                    <Text fx:id="plantCare" wrappingWidth="800" styleClass="section-body"/>
                                </VBox>

                                <!-- Nessuna selezione -->
                                <Label fx:id="emptyHint"
                                       text="Seleziona una pianta a destra per vederne i dettagli"
                                       styleClass="hint" visible="true"/>
                            </VBox>
                        </VBox>
                    </content>
                </ScrollPane>

                <!-- SIDEBAR DESTRA -->
                <VBox spacing="12" styleClass="sidebar-right"
                      prefWidth="340" minWidth="260" maxWidth="480">

                    <HBox spacing="8" alignment="CENTER_LEFT">
                        <TextField fx:id="searchField"
                                   promptText="Cerca per nome o parola chiave…"
                                   HBox.hgrow="ALWAYS"
                                   styleClass="search-bar"/>
                        <Button fx:id="clearSearchBtn" text="×" focusTraversable="false"/>
                    </HBox>

                    <FlowPane hgap="8" vgap="8" prefWrapLength="320">
                        <ToggleButton fx:id="allChip"     text="Tutte"    selected="true" styleClass="chip"/>
                        <ToggleButton fx:id="commonChip"  text="Comuni"                 styleClass="chip"/>
                        <ToggleButton fx:id="rareChip"    text="Rare"                   styleClass="chip"/>
                        <ToggleButton fx:id="specialChip" text="Speciali"               styleClass="chip"/>
                    </FlowPane>

                    <ListView fx:id="plantsList" prefHeight="520" VBox.vgrow="ALWAYS"/>
                </VBox>

            </items>
        </SplitPane>
    </center>

</BorderPane>
